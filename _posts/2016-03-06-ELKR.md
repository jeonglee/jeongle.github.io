---
layout: post
title: "ELKR Log Analysis"
date: 2016-03-06
---

ELKR stands for ElasticSearch + Logstash + Kibana + Redis.
It's a set of open source tools that we can use to create a fairly efficient and scalable system for log analysis.

Since everything is open source this is a great resource for startups to systematically analyze their logs.

<h1> Introduction </h1>
To get an idea of how this system works, here is a description of the tools we'll be using:

<h2> ElasticSearch </h2>
ElasticSearch is the database that we'll be using to analyze our logs. By properly indexing the logs we acquire, we'll be able to query and find out relevant information regarding our logs using ElasticSearch.

<h2> Kibana </h2>
Kibana works with ElasticSearch to visualize relevant information regarding our logs. For example, if we can query logs based on time in ElasticSearch, Kibana will yield a bar chart that displays the log count with respect to time.

<h2> Logstash </h2>
Logstash is the tool we'll be using to 'gather' and 'send' logs from one place to another. 

<h2> Redis </h2>
Redis queues the logs before they are sent to ElasticSearch, in case of spikes in traffic.


Now, how do these tools work together? 
<img src="/assets/images/ELKR.png">
 
In this model we gather the logs from a web server, ship those logs to Redis for queuing, and send them to ElasticSearch/Kibana for analysis. In this tutorial we'll be using Apache as our server.

<h2> Installing Apache </h2>
If you already use apache or don't want to read about what web servers are feel free to skip this section.

Ever wonder how websites work? When you type in 'facebook.com' into your browser and you end up at the login page, what is happening behind the scenes? A lot actually. But here's a very general explanation:

1. Your browser asks the server at 'www.facebook.com' for the login page.
2. The server at facebook receives this request, and sends back the login page.
3. Your browser receives and displays the page.

Now, what do I mean by 'server'? Well, it refers to a computer that has the login-page in store. But how does this computer know to receive and respond to requests from your browser? If a server is like any other old computer, can my computer also receive requests from browsers?

The answer is, yes. You can do this through a 'web server' like Apache or Nginx or Tomcat or IIS or etc... Note that it's important to distinguish 'server' from 'web server' here. The 'server' refers to the actual machine serving the web pages to your browser, while the 'web server' refers to the program on the computer(server) that makes this possible.

So, apache is a program that allows your computer to receive and respond to web page requests from other people(browsers)  
